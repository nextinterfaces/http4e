<script src="http://prototypejs.org/assets/2009/8/31/prototype.js" 
    type="text/javascript"></script>

<script language="Javascript">
  /*
   * This is a sample Prototype HTTP REST client generated by HTTP4e (http://www.nextinterfaces.com).
   */
  var url = "$httpBean.url";
  var method = "$httpBean.method";
  var params = "$httpBean.paramsForUrl";
  var postBody = "$httpBean.body";

  Ajax.Request.prototype.setRequestHeaders = Ajax.Request.prototype.setRequestHeaders.wrap(
    function(original) {
        // add custom headers
#foreach( $hKey in $httpBean.headers.keySet() )
        this.transport.setRequestHeader("$hKey", "$httpBean.headers.get($hKey)");
#end
        original();
})

  var ajaxRequest = new Ajax.Request( url, {
      method:       	method, 
      parameters:   	params,
      postBody:			postBody,
      asynchronous: 	true,
      onComplete:   	onComplete,
      /*encoding: "UTF8", contentType: "text/xml",*/
  });

  function onComplete(xhr, responseHeader) {	    
      if (xhr.readyState == 4) {
          alert("HTTP/1.1 " + xhr.status + " " + xhr.statusText + 
          "\n" + xhr.getAllResponseHeaders() + 
          "\n" + xhr.responseText);	
      }
      //alert(xhr.responseXML);
  }

</script>