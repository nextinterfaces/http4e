"""
  This is a Python HTTP client generated by HTTP4e (http://www.nextinterfaces.com)
"""
import simplejson
import httplib, urllib

method = "$httpBean.method"
host = "$httpBean.server"
uri = "$httpBean.path"
body = "$httpBean.body"
headers = {
#foreach( $hKey in $httpBean.headers.keySet() )
     "$hKey": "$httpBean.headers.get($hKey)",
#end
}


def request(method, host, uri, body, headers = {}):
    conn = httplib.HTTPConnection(host)
    conn.request(method.upper(), uri, body, headers)
    response = conn.getresponse()
    print response.status, response.reason
    if response.status == 200:
"""
        Load a JSON data
        obj = simplejson.loads(response.read())
"""
        obj = response.read()
        return obj
    else:
        print response.status, response.reason, response.read()
    conn.close()

"""
 Execute the HTTP call
"""
request(method, host, uri, body, headers = {}):